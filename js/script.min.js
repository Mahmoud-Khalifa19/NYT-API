
// Select the DOM element to which we wish to append
const articleContainer = $('#article-container');
const loader = $('.loader');
const itemsPerPage = 12;
loader.hide();

// Changing sections
const changeSection = (event) => {
	console.log(event.value);

	// Set the container to have blank contents as we're requesting new data
	articleContainer.html('');
	loadData(event.value);
}

// Load data from the API
const loadData = (section) => {
	loader.show();
	const url = `https://api.nytimes.com/svc/topstories/v2/${section}.json`;
	

	$.ajax({
		url,
		method: 'GET',
		dataType: 'json',
		data: {
			'api-key': "yeKXMSVZUVUAd8qQKrK1HTd7dmnvAECb" 
		}
	}).done(function(data) {
		loader.hide();

		// Append the result
		// Loop through the result
		data.results.forEach(result => {
			const multimediaUrl = result.multimedia[0]?.url || '';
			const item = `<div>
				<a href="${result.url}">
					<div class="article" style="background: url(${multimediaUrl})"/>
					<p>${result.abstract}</p>
				</a>
			</div>`;
			articleContainer.append(item);
		});
	}).fail((xhr, status, error) => {
		console.log("Failed to fetch data: ", error);
		loader.hide();
	});
};

// Initial load with a default section
loadData('sports');










